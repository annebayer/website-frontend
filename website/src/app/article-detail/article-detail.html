<article class="article-detail" *ngIf="day">
  <!-- Header -->
  <header class="article-header">
    <h1>{{ day.title }}</h1>

    <div class="meta-info">
      <div class="dates">
        <span>üìÖ {{ formatDate(day.dateFrom) }}</span>
        <span *ngIf="day.dateTo"> - {{ formatDate(day.dateTo) }}</span>
      </div>
      <span class="highlights" *ngIf="day.Highlights">
        ‚≠ê {{ day.Highlights }}
      </span>
    </div>
  </header>

  <!-- Description -->
  <section class="description" *ngIf="day.description?.length">
    <p>{{ getDescriptionText() }}</p>
  </section>

  <!-- Picture Blocks -->
  <section class="content-blocks">
    <div *ngFor="let block of day.pictures; let i = index">
      <p>{{block?.type }}  bei index {{i}}</p>
      <!-- Bilder mit Text Block -->


      <!-- Tip Block -->
      <div *ngIf="isTip(block)" class="tip-block">
        <p>Tip</p>
        <app-tip [tip]="block"></app-tip>
      </div>

      <!-- Ausfluege Block -->
      <div *ngIf="isAusfluege(block)" class="ausfluege-block">
        <p>Ausflug</p>
        <app-ausflug [ausflug]="block"></app-ausflug>
      </div>

    </div>
  </section>
</article>

<!-- Lightbox -->
<div class="lightbox" *ngIf="lightboxOpen" (click)="closeLightbox()">
  <div class="lightbox-overlay"></div>

  <div class="lightbox-content" (click)="$event.stopPropagation()">
    <button class="lightbox-close" (click)="closeLightbox()">√ó</button>

    <img
      class="lightbox-image"
      [src]="getImageUrl(lightboxImages[lightboxIndex].url)"
      [alt]="lightboxImages[lightboxIndex].alternativeText || 'Bild'"
    />

    <p class="lightbox-description" *ngIf="lightboxDescription">
      {{ lightboxDescription }}
    </p>

    <div class="lightbox-nav" *ngIf="lightboxImages.length > 1">
      <button
        class="nav-btn"
        (click)="previousImage()"
        [disabled]="lightboxIndex === 0"
      >
        ‚Äπ
      </button>

      <span class="image-counter">
        {{ lightboxIndex + 1 }} / {{ lightboxImages.length }}
      </span>

      <button
        class="nav-btn"
        (click)="nextImage()"
        [disabled]="lightboxIndex === lightboxImages.length - 1"
      >
        ‚Ä∫
      </button>
    </div>
  </div>
</div>

<!-- Loading/Error States -->
<div *ngIf="!day" class="loading">
  <p>Laden...</p>
</div>
